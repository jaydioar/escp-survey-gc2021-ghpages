{"version":3,"sources":["components/survey/formbuilder/dropdown/DropDown.jsx","components/survey/formbuilder/numericalinput/NumericalInput.jsx","components/survey/formbuilder/researchsimulation/ResearchSimulation.jsx","helpers/bbcode.js","components/survey/formbuilder/selectfromrange/SelectFromRange.jsx","components/survey/formbuilder/slider/Slider.jsx","components/survey/formbuilder/textarea/TextArea.jsx","components/survey/formbuilder/textinput/TextInput.jsx","components/survey/formbuilder/selfassessment/SelfAssessment.jsx","components/survey/formbuilder/FormBuilder.jsx","components/survey/simplemodal/SimpleModal.jsx","components/survey/SurveyPage.jsx","components/survey/SurveyQuestionaire.jsx","components/survey/SurveyManager.jsx","ExportApp.js","App.js","reportWebVitals.js","index.js"],"names":["DropDown","_ref","name","label","options","onValueSelect","_objectWithoutProperties","_excluded","_jsxs","children","_jsx","className","onChange","map","opt","idx","value","NumericalInput","onComplete","otherProps","_Fragment","_objectSpread","type","e","target","length","viewerStart","ResearchSimulation","onSearchHistoryChanged","placeholder","notFoundMessage","labelOpenDocument","_useState","useState","_useState2","_slicedToArray","searchKeywords","setSearchKeywords","_useState3","init","_useState4","searchResults","setSearchResults","_useState5","_useState6","loggedActions","logAction","_useState7","title","url","viewerIsOpen","_useState8","docToView","setDocToView","_useState9","_useState10","controlData","setControlData","useEffect","axios","get","then","response","validRuleSet","ruleSet","_ruleSet$researchSimu","_ruleSet$researchSimu2","_ruleSet$researchSimu3","researchSimulation","Error","config","cues","forEach","element","id","keywords","concat","JSON","stringify","err","console","error","message","validateRuleSet","data","log","action","info","actions","push","time_","Date","getTime","time","toISOString","triggerSearch","res","toLowerCase","split","reduce","acc","kw","_controlData$research","filter","item","indexOf","cue","Object","keys","autoFocus","onKeyPress","key","disabled","clsx","onClick","k","now","durationOfView","durationInSec","src","frameBorder","scrolling","height","width","replaceBBCode","raw","last","replace","SelectFromRange","_ref2","alignment","randomizeOrder","handleChange","selOptions","array","randomIndex","currentIndex","Math","floor","random","shuffle","dangerouslySetInnerHTML","__html","htmlFor","Slider","min","max","unit","otherAttrs","ceil","currentSliderValue","setCurrentSliderValue","handleFinishedSlide","defaultValue","onMouseUp","onKeyUp","TextArea","isRequired","onBlur","TextInput","SelfAssessment","onAllChosen","attributes","randomOrder","inputArray","ia","sort","shuffleArray","inputData","fieldsOrdered","answers","handleOptChange","_calcGoughScore","score","posMatches","negMatches","attr","v","trend","calcGoughScore","score1","score2","attrData","renderedElementId","propsAreEqual","prevProps","nextProps","formSections","FormBuilder","memo","formName","onFormChanged","onFormComplete","defaultValues","completedInputFields","assign","requiredInputFields","registerRequiredInputField","includes","renderText","paragraphs","p","stashInput","xname","xvalue","ci","saveCurrentInputValue","isCompleted","reqFieldName","undefined","formIsCompleted","cif","renderTextArea","_ref4","_completedInputFields","rows","isOptional","curVal","registerOpen","renderPickVersion","_ref10","_versions$choosenVers","versions","numVersions","a","Uint32Array","choosenVersion","crypto","getRandomValues","toString","elements","el","module","renderIncludedElement","renderAside","sideElements","_ref11","content","renderSelfAssessment","_ref9","href","renderLinkThumbnail","_ref8","labe","renderResearchSimulation","_ref7","renderDropDown","_ref3","renderSelectFromRange","renderSlider","text","renderHeadline","renderBoxedText","bPoints","renderBulletList","_ref5","_completedInputFields2","renderTextInput","_ref6","_completedInputFields3","renderNumericalInput","formContent","renderSections","secs","depth","sec","secIdx","sections","SimpleModal","buttons","onAccept","onReject","t","accept","reject","SurveyPage","_page$sections","page","onNextPage","onPrevPage","allowProceed","useMemo","_page$settings","settings","thisId","currentPageIsComplete","setCurrentPageIsComplete","show","modalContent","setModalContent","formData","setFormData","lockNextButton","triggerNextPage","_page$settings2","nextId","confirmMoveForward","_page$settings3","_page$settings$confir","triggerPrevPage","prevId","backButton","_page$settings4","allowMoveBack","renderBackButton","nextButton","labelNextPage","modalWindow","padStart","_timeComplete","timeComplete","getPage","pageSet","pageId","pages","val","SurveyQuestionaire","currentPage","setCurrentPage","firstPage","rootPages","getFirstPage","window","scrollTo","SurveyManager","onSaveData","sessionId","surveyIsComplete","setSurveyIsComplete","surveyId","meta","surveyData","setSurveyData","sd","ExportApp","jsonIsValid","setJsonIsValid","jsonParsed","setJsonParsed","resultCsv","setResultCsv","convertToCsv","headings","join","line","escVal","resolveSearchHistory","searchTrials","memTimeOpen","cueReadingTimes","i","trial","_trial$info","_trial$info2","diff","parseInt","match","foundCues","resCues","totalTrials","tmp","resSearches","uniqueSearchTerms","flat","checkIfJsonIsValid","jsonTxt","jsonObj","parse","heigth","cols","csvRes","surveys","_val$page","_val$page2","_val$page3","_val$page4","_val$page5","_val$page6","_val$page7","_val$page8","_val$page9","_val$page10","_val$page11","_val$page12","_val$page13","_val$page14","_val$page15","_val$page16","_val$page17","_val$page18","_val$page18$q","_val$page19","_val$page19$q","_val$page20","_val$page21","_val$page22","_val$page23","_val$page24","_val$page25","_val$page26","_val$page27","_val$page28","_val$page29","_val$page30","_val$page31","_val$page32","_val$page33","_val$page34","substring","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","dbDatabase","getDatabase","startDate","surveySessionId","sha256","getUTCMilliseconds","CryptoJS","enc","Hex","writeToDatabase","_data$page","_data$page$q","endDate","_startDate","_endDate","completionTimeInMinutes","round","completionTimeInSeconds","emailAddress","set","ref","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","substr","catch","newMailKey","child","updates","email","update","SurveyApp","surveyControlData","setSurveyControlData","initBeforeUnLoad","showExitPrompt","onbeforeunload","event","preventDefault","returnValue","App","_useExitPrompt","bool","setShowExitPrompt","onload","useExitPrompt","_useExitPrompt2","Routes","Route","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","React","StrictMode","HashRouter","document","getElementById"],"mappings":"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","file":"static/js/main.e68b90ec.chunk.js","sourcesContent":["\r\nexport const DropDown = ({ name, label, options, onValueSelect, ...otherAttrs }) => {\r\n  return (\r\n    <div key={name}>\r\n      <div className=\"font-bold pb-5\">{label}</div>\r\n      <select name={name} onChange={onValueSelect} className=\"py-1 px-3 border border-solid border-black bg-gray-50\">\r\n        {options.map((opt, idx) => {\r\n          return <option value={opt.value} key={idx}>{opt.label}</option>\r\n        })}\r\n      </select>\r\n    </div>\r\n  )\r\n}","export const NumericalInput = ({ onChange, onComplete, label, ...otherProps }) => {\r\n  const handleOnChangeEvent = e => {\r\n    if (e.target.value.length > 0) {\r\n      onChange(e)\r\n      onComplete(e)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {label && <div className=\"font-bold pb-5\">{label}</div>}\r\n      <input type=\"number\"\r\n        onChange={handleOnChangeEvent}\r\n        className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\r\n        {...otherProps} />\r\n    </>\r\n  )\r\n}","import { useEffect, useState } from 'react'\r\nimport axios from 'axios'\r\nimport clsx from 'clsx'\r\n\r\nconst MIN_CHARS_FOR_SEARCH = 4\r\nlet viewerStart = null\r\n\r\nexport const ResearchSimulation = ({ name, onSearchHistoryChanged, placeholder, notFoundMessage, labelOpenDocument, ...otherAttrs }) => {\r\n  const [searchKeywords, setSearchKeywords] = useState(\"\")\r\n  const [searchResults, setSearchResults] = useState({ init: true })\r\n  const [loggedActions, logAction] = useState([])\r\n  const [docToView, setDocToView] = useState({ title: null, url: null, viewerIsOpen: false })\r\n  const [controlData, setControlData] = useState(null)\r\n\r\n  const validateRuleSet = (ruleSet) => {\r\n    if (!ruleSet?.researchSimulation) {\r\n      throw Error('Die Daten in research-simulation.json sind ungültig!')\r\n    }\r\n\r\n    if (!ruleSet.researchSimulation?.config) {\r\n      throw Error('Abschnitt \"config: { ... }\" in research-simulation.json fehlt!')\r\n    }\r\n\r\n    if (!ruleSet.researchSimulation?.cues?.length > 0) {\r\n      throw Error('Abschnitt \"cues\": [ ... ] in research-simulation.json fehlt oder ist leer!')\r\n    }\r\n\r\n    try {\r\n      ruleSet.researchSimulation.cues.forEach(element => {\r\n        const { id, title, keywords, url } = element\r\n\r\n        if (!id || typeof id !== \"number\") { throw Error(`Fehlendes oder ungültiges Attribute \"id\" (keine Zahl?) in ${JSON.stringify(element)}`) }\r\n        if (!title || typeof title !== \"string\" || title?.length < 1) { throw Error(`Fehlendes oder ungültiges Attribute \"title\" (keine Zeichenkette?) in ${JSON.stringify(element)}`) }\r\n        if (!keywords || !keywords?.length > 1) { throw Error(`Fehlendes oder ungültiges Attribute \"keywords\" (keine Zeichenkette?) in ${JSON.stringify(element)}`) }\r\n        if (!url || !url?.length > 1) { throw Error(`Fehlendes oder ungültiges Attribute \"url\" (keine Zeichenkette?) in ${JSON.stringify(element)}`) }\r\n      })\r\n    } catch (err) {\r\n      console.error(err)\r\n      throw JSON.stringify(err.message)\r\n    }\r\n\r\n    return ruleSet\r\n  }\r\n\r\n  useEffect(() => {\r\n    // this json contains the variables and steering commands for customizing survey\r\n    axios.get('./content/research-simulation.json').then(response => {\r\n      const validRuleSet = validateRuleSet(response.data)\r\n\r\n      if (validRuleSet) {\r\n        setControlData(validRuleSet)\r\n      } else {\r\n        console.log('Control data invalid.')\r\n      }\r\n    })\r\n  }, [])\r\n\r\n  const getSearchResults = (keywords) => {\r\n    const kws = keywords.toLowerCase().split(';')\r\n\r\n    return kws.reduce((acc, kw) => {\r\n      if (kw.length === 0) return acc\r\n\r\n      const cues4Kw = controlData.researchSimulation?.cues.filter((item) => {\r\n        return item.keywords.toLowerCase().indexOf(kw) > -1\r\n      })\r\n\r\n      cues4Kw.forEach(cue => {\r\n        acc[cue.id] = cue\r\n      })\r\n\r\n      return acc\r\n    }, {})\r\n  }\r\n\r\n  const updateKeywords = (e) => {\r\n    setSearchKeywords(e.target.value)\r\n  }\r\n\r\n  // try {\r\n  //   ruleSetIsValid()\r\n  // }\r\n  // catch (err) {\r\n  //   return (<div className=\"bg-red-100 text-red-700 p-20\">\r\n  //     Die Daten in der JSON-Datei für das Modul \"Research Simulation\" sind ungültig.<br />\r\n  //     {JSON.parse(err)}\r\n  //   </div>)\r\n  // }\r\n\r\n  const log = (action, info) => {\r\n    const actions = loggedActions\r\n    actions.push({\r\n      time_: new Date().getTime(),\r\n      time: new Date().toISOString(),\r\n      action,\r\n      info\r\n    })\r\n    logAction(actions)\r\n    onSearchHistoryChanged({ target: { name: name, value: actions } })\r\n  }\r\n\r\n  const triggerSearch = (e) => {\r\n    const res = getSearchResults(searchKeywords)\r\n    if (Object.keys(res).length === 0) {\r\n      log('SEARCH-FAILED', searchKeywords)\r\n    } else {\r\n      log('SEARCH-SUCCESS', searchKeywords)\r\n    }\r\n\r\n    setSearchResults(res)\r\n  }\r\n\r\n  const getViewer = (cue) => () => {\r\n    log('OPEN', cue.url)\r\n    const now = new Date()\r\n    viewerStart = now.getTime()\r\n    setDocToView({ title: cue.title, url: cue.url, viewerIsOpen: true })\r\n  }\r\n\r\n  const closeViewer = (e) => {\r\n    const url = docToView.url\r\n    const now = new Date()\r\n    const durationOfView = now.getTime() - viewerStart\r\n    viewerStart = null\r\n    log('CLOSE', { url, durationInSec: durationOfView / 1000 })\r\n    setDocToView({ title: null, url: null, viewerIsOpen: false })\r\n  }\r\n\r\n  const handleEnterKey = (e) => {\r\n    if (e.key === 'Enter' && searchKeywords.length >= MIN_CHARS_FOR_SEARCH) {\r\n      triggerSearch()\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"container mx-auto\">\r\n      <h1 className=\"text-3xl pb-4\">Recherche</h1>\r\n\r\n      <div className=\"bg-blue-50 shadow-md px-8 pt-6 pb-8 mb-4\">\r\n        <div className=\"mb-4\">\r\n          <input autoFocus onKeyPress={handleEnterKey} onChange={updateKeywords} className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\" id=\"keywords\" type=\"text\" placeholder={placeholder} />\r\n        </div>\r\n        <div className=\"flex items-center justify-between\">\r\n          <button disabled={searchKeywords.length < MIN_CHARS_FOR_SEARCH && 'disabled'} className={clsx({\r\n            \"bg-blue-300 text-white font-bold py-2 px-4 rounded opacity-50 cursor-not-allowed\": searchKeywords.length < MIN_CHARS_FOR_SEARCH,\r\n            \"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\": searchKeywords.length >= MIN_CHARS_FOR_SEARCH\r\n          })} type=\"button\" onClick={triggerSearch}>\r\n            Suchen\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {searchResults.init !== true && Object.keys(searchResults).length === 0 && (\r\n        <div className=\"bg-gray-50 p-10 my-10\">\r\n          <div>{notFoundMessage}</div>\r\n        </div>)\r\n      }\r\n\r\n      {searchResults.init !== true && Object.keys(searchResults).map(k => (\r\n        <div className=\"bg-gray-50 p-5 my-1 border-gray-500\" key={k}>\r\n          <div className=\"font-bold\">{searchResults[k].title}</div>\r\n          <div className=\"text-blue-400\"><div className=\"cursor-pointer text-blue-700\" onClick={getViewer(searchResults[k])}>{labelOpenDocument}</div></div>\r\n        </div>)\r\n      )}\r\n\r\n      {docToView.viewerIsOpen && <div className=\"fixed inset-0 bg-gray-600 bg-opacity-99 overflow-y-auto h-full w-full\">\r\n        <div className=\"flex w-full bg-gray-800 text-white text-xl p-2\">\r\n          <button className=\"flex-none p-2 cursor-pointer m-2 bg-blue-500 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded focus:outline-none focus:shadow-outline\" onClick={closeViewer}>Zurück zur Suchmaske</button>\r\n          <div className=\"flex-grow text-center pt-4 pl-52 text-2xl font-bold\">{docToView.title}</div>\r\n        </div>\r\n        <div className=\"w-full h-full\">\r\n          <embed\r\n            src={docToView.url}\r\n            type=\"application/pdf\"\r\n            frameBorder=\"0\"\r\n            scrolling=\"auto\"\r\n            height=\"100%\"\r\n            width=\"100%\"\r\n          ></embed>\r\n        </div>\r\n      </div>}\r\n\r\n    </div>\r\n  )\r\n\r\n}","/**\r\n * Finds and replaces some very basic BBCode tags\r\n */\r\nexport const replaceBBCode = raw => {\r\n  if (!raw || raw.length < 1) return\r\n\r\n  let last = null\r\n  let res = raw\r\n\r\n  do {\r\n    last = res\r\n    // match simple format tags\r\n    res = res.replace(/\\[(b|i|u|s|center)\\](.*?)\\[\\/\\1\\]/gs, \"<$1>$2</$1>\")\r\n    res = res.replace(/\\[url=(\\/.+?)\\](.*?)\\[\\/url\\]/g, \"<a href='$1' target='_blank' class='external'>$2</a>\")\r\n  } while (res !== last)\r\n\r\n  // match line breaks\r\n  res = res.replace(/\\[br\\]*/gs, \"<br />\")\r\n\r\n  return res\r\n}\r\n\r\n","import { replaceBBCode } from \"../../../../helpers/bbcode\"\r\n\r\nfunction shuffle(array) {\r\n  let currentIndex = array.length, randomIndex\r\n\r\n  // While there remain elements to shuffle.\r\n  while (currentIndex != 0) {\r\n\r\n    // Pick a remaining element.\r\n    randomIndex = Math.floor(Math.random() * currentIndex)\r\n    currentIndex--;\r\n\r\n    // And swap it with the current element.\r\n    [array[currentIndex], array[randomIndex]] = [\r\n      array[randomIndex], array[currentIndex]]\r\n  }\r\n\r\n  return array\r\n}\r\n\r\n\r\nexport const SelectFromRange = ({ name, label, options, onChange, alignment, randomizeOrder, ...otherAttrs }) => {\r\n\r\n  const handleChange = (e) => {\r\n    return onChange(e)\r\n  }\r\n\r\n  let selOptions = options\r\n  if (randomizeOrder) {\r\n    shuffle(selOptions)\r\n  }\r\n\r\n  if (alignment === 'vertical') {\r\n    return (\r\n      <div key={name} className=\"p-0 w-full\">\r\n        <div className=\"max-w-full pb-5 font-bold\" dangerouslySetInnerHTML={{\r\n          __html: replaceBBCode(label) || ' '\r\n        }}></div>\r\n\r\n        <div className=\"w-full\">\r\n          {selOptions.map((opt, idx) => (\r\n            <div className=\"h-12\">\r\n              <span className=\"w-min\"><input type=\"radio\" name={name} id={`${name}${opt.value}`} value={opt.value} onChange={handleChange} /></span> &nbsp;\r\n              <label className=\"w-full border border-solid\" key={idx} htmlFor={`${name}${opt.value}`}>\r\n                <span className=\"h-16 font-bold text-center whitespace-pre\" dangerouslySetInnerHTML={{\r\n                  __html: replaceBBCode(opt.label) || ' '\r\n                }}>\r\n                </span>\r\n              </label>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    )\r\n  } else {\r\n    return (<div key={name} className=\"p-0 w-full\">\r\n      <div className=\"max-w-full pb-5 font-bold\" dangerouslySetInnerHTML={{\r\n        __html: replaceBBCode(label) || ' '\r\n      }}></div>\r\n\r\n      <div className=\"w-full flex\">\r\n        {options.map((opt, idx) => (\r\n          <label className=\"w-full border border-solid\" key={idx} htmlFor={`${name}${opt.value}`}>\r\n            <div className=\"h-16 font-bold text-center whitespace-pre\" dangerouslySetInnerHTML={{\r\n              __html: replaceBBCode(opt.label) || ' '\r\n            }}>\r\n            </div>\r\n            <div className=\"text-center\"><input type=\"radio\" name={name} id={`${name}${opt.value}`} value={opt.value} onChange={handleChange} /></div>\r\n            <div className=\"text-center\">{opt.value}</div>\r\n          </label>\r\n        ))}\r\n      </div>\r\n    </div>)\r\n  }\r\n}","import { useState } from \"react\"\r\n\r\nexport const Slider = ({ name, min, max, label, unit, onChange, ...otherAttrs }) => {\r\n  const middleMinMax = Math.ceil(min + ((max - min) / 2))\r\n  const [currentSliderValue, setCurrentSliderValue] = useState(null)\r\n\r\n  const handleSlideChange = (e) => {\r\n    setCurrentSliderValue(e.target.value)\r\n  }\r\n\r\n  const handleFinishedSlide = (e) => {\r\n    return onChange({\r\n      target: {\r\n        name: name,\r\n        value: currentSliderValue\r\n      }\r\n    })\r\n  }\r\n\r\n  return (<div key={name} className=\"p-0\">\r\n    <div className=\"max-w-sm font-bold pb-5\">{label}</div>\r\n    <input\r\n      className=\"bg-gray-400\"\r\n      type=\"range\"\r\n      name={name}\r\n      min={min}\r\n      max={max}\r\n      defaultValue={-1}\r\n      onChange={handleSlideChange}\r\n      onMouseUp={handleFinishedSlide}\r\n      onKeyUp={handleFinishedSlide}\r\n      {...otherAttrs}\r\n    />&nbsp;\r\n    <span>{currentSliderValue} {unit}</span>\r\n  </div>)\r\n}","export const TextArea = ({ name, onChange, onComplete, label, isRequired, ...otherProps }) => {\r\n  const onChangeHandler = e => {\r\n    if (e.target.value.length > 0) {\r\n      onChange(e)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {label && <div className=\"font-bold pb-5\">{label}</div>}\r\n      <textarea\r\n        name={name}\r\n        onChange={onChangeHandler}\r\n        onBlur={onComplete}\r\n        className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\r\n        {...otherProps} />\r\n    </>\r\n  )\r\n}","export const TextInput = ({ onChange, onComplete, label, ...otherProps }) => {\r\n  const handleOnChangeEvent = e => {\r\n    if (e.target.value.length > 0) {\r\n      onChange(e)\r\n      onComplete(e)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {label && <div className=\"font-bold pb-5\">{label}</div>}\r\n      <input type=\"text\"\r\n        onChange={handleOnChangeEvent}\r\n        className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\r\n        {...otherProps} />\r\n    </>\r\n  )\r\n}","export const SelfAssessment = ({ data, onAllChosen, ...otherAttrs }) => {\r\n  if (!data?.attributes || data.attributes.length === 0) {\r\n    return <div>No attributes given</div>\r\n  }\r\n\r\n  const shuffleArray = (inputArray) => {\r\n    const ia = inputArray\r\n    ia.sort(() => Math.random() - 0.5)\r\n    return ia\r\n  }\r\n\r\n  const calcGoughScore = (answers, attributes) => {\r\n    let score = 0\r\n    let posMatches = 0\r\n    let negMatches = 0\r\n\r\n    Object.keys(answers).forEach(element => {\r\n      const attr = attributes.filter(v => { return (v.name === element) })[0]\r\n\r\n      if (attr.trend === 'pos' && answers[element] === 'y') {\r\n        score++\r\n        posMatches++\r\n      }\r\n\r\n      if (attr.trend === 'neg' && answers[element] === 'y') {\r\n        score--\r\n        negMatches++\r\n      }\r\n    })\r\n\r\n    return ({\r\n      score,\r\n      posMatches,\r\n      negMatches\r\n    })\r\n  }\r\n\r\n  const randomOrder = shuffleArray(Object.keys(data.attributes))\r\n\r\n  const fieldsOrdered = randomOrder.map(key => {\r\n    return data.attributes[key].name\r\n  })\r\n\r\n  let inputData = {\r\n    fieldsOrdered: fieldsOrdered,\r\n    answers: {}\r\n  }\r\n\r\n  const handleOptChange = e => {\r\n    inputData.answers[e.target.name] = e.target.value\r\n\r\n    if (Object.keys(inputData.answers).length > 0 &&\r\n      Object.keys(inputData.answers).length === inputData.fieldsOrdered.length) {\r\n      const { score, posMatches, negMatches } = calcGoughScore(inputData.answers, data.attributes)\r\n\r\n      inputData.score1 = score\r\n      inputData.score2 = posMatches / (posMatches + negMatches)\r\n      onAllChosen({\r\n        target: {\r\n          name: data.name,\r\n          value: inputData,\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex flex-wrap\">\r\n      {randomOrder.map((key, idx) => {\r\n        const attrData = data.attributes[key]\r\n\r\n        return (\r\n          <div className=\"flex w-full md:w-1/2\" key={idx}>\r\n            <div className=\"border border-solid border-gray-200 bg-gray-50 flex p-2 w-full\">\r\n              <div className=\"flex-grow\">{attrData.label}</div>\r\n              <label htmlFor={attrData.name} className=\"flex-0 w-1/4\">\r\n                <input type=\"radio\" name={attrData.name} id={attrData.name} value=\"y\" onChange={handleOptChange} />&nbsp; Ja\r\n              </label>\r\n              <label htmlFor={attrData.name + '2'} className=\"flex-0\">\r\n                <input type=\"radio\" name={attrData.name} id={attrData.name + '2'} value=\"n\" onChange={handleOptChange} />&nbsp; Nein\r\n              </label>\r\n            </div>\r\n          </div>)\r\n      })}\r\n    </div>\r\n  )\r\n\r\n\r\n\r\n\r\n\r\n}","import { DropDown } from \"./dropdown/DropDown\"\r\nimport { NumericalInput } from \"./numericalinput/NumericalInput\"\r\nimport { ResearchSimulation } from \"./researchsimulation/ResearchSimulation\"\r\nimport { SelectFromRange } from \"./selectfromrange/SelectFromRange\"\r\nimport { Slider } from \"./slider/Slider\"\r\nimport { TextArea } from \"./textarea/TextArea\"\r\nimport { TextInput } from \"./textinput/TextInput\"\r\nimport { replaceBBCode } from \"./../../../helpers/bbcode\"\r\nimport { SelfAssessment } from \"./selfassessment/SelfAssessment\"\r\nimport { memo } from \"react\"\r\n\r\n// @TODO find better solution for generating unique element ids\r\nlet renderedElementId = 0\r\n\r\n\r\nconst propsAreEqual = (prevProps, nextProps) => {\r\n  return prevProps.formSections === nextProps.formSections\r\n}\r\n\r\nexport const FormBuilder = memo(({ formSections, formName, onFormChanged, onFormComplete, defaultValues }) => {\r\n\r\n  let completedInputFields = Object.assign({}, defaultValues)\r\n  let requiredInputFields = []\r\n\r\n  const registerRequiredInputField = (name, isRequired) => {\r\n    if (isRequired && !requiredInputFields.includes(name)) {\r\n      requiredInputFields.push(name)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Renders a section headline\r\n   */\r\n  const renderHeadline = data => {\r\n    return (\r\n      <div className=\"text-xl pt-3 pb-4\" key={data.text}>\r\n        <strong>{data.text}</strong>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  /**\r\n   * Renders a bunch of text paragraphs\r\n   */\r\n  const renderText = data => {\r\n    return data.paragraphs.map((p, idx) => (\r\n      <p className=\"pb-3\" key={idx} dangerouslySetInnerHTML={{\r\n        __html: replaceBBCode(p)\r\n      }}></p>\r\n    ))\r\n  }\r\n\r\n  const renderBoxedText = data => {\r\n    const text = renderText(data)\r\n    return <div className=\"border border-gray-400 bg-gray-200 p-5 border-solid\">\r\n      {text}\r\n    </div>\r\n  }\r\n\r\n  const renderBulletList = data => {\r\n    const bPoints = data.paragraphs.map((p, idx) => {\r\n      return <li className=\"pb-3 list-item\" key={idx}>{p}</li>\r\n    })\r\n\r\n    return <ul className=\"pl-10 list-outside list-disc\">\r\n      {bPoints}\r\n    </ul>\r\n  }\r\n\r\n  const formIsCompleted = () => {\r\n    if (!completedInputFields) {\r\n      return false\r\n    }\r\n\r\n    if (completedInputFields && Object.keys(completedInputFields).length < 1) {\r\n      return true\r\n    }\r\n\r\n    let isCompleted = true\r\n\r\n    requiredInputFields.forEach(reqFieldName => {\r\n      if (completedInputFields[reqFieldName] === undefined || completedInputFields[reqFieldName] === null) {\r\n        isCompleted = false\r\n      }\r\n    })\r\n    return isCompleted\r\n  }\r\n\r\n  const stashInput = (xname, xvalue) => {\r\n    const ci = completedInputFields\r\n    ci[xname] = xvalue\r\n    completedInputFields = ci\r\n  }\r\n\r\n  const saveCurrentInputValue = e => {\r\n    stashInput(e.target.name, e.target.value)\r\n    onFormChanged(formName, completedInputFields)\r\n\r\n    if (formIsCompleted()) {\r\n      let cif = Object.assign({}, completedInputFields)\r\n      cif.isCompleted = true\r\n      onFormComplete(formName, cif)\r\n    }\r\n  }\r\n\r\n\r\n  const renderSlider = ({ label, name, unit, min, max, isOptional, ...otherAttributes }) => {\r\n    registerRequiredInputField(name, !isOptional)\r\n    return (\r\n      <div key={name} className=\"bg-gray-200 p-5 w-full\">\r\n        <Slider\r\n          name={name}\r\n          className=\"min-w-full\"\r\n          label={label}\r\n          unit={unit}\r\n          onChange={saveCurrentInputValue}\r\n          min={min}\r\n          max={max}\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n\r\n\r\n  const renderSelectFromRange = ({ name, isOptional, label, options, alignment, randomizeOrder }) => {\r\n    registerRequiredInputField(name, !isOptional)\r\n\r\n    return (\r\n      <div key={name} className=\"bg-gray-200 p-5\">\r\n        <SelectFromRange\r\n          name={name}\r\n          label={label}\r\n          options={options}\r\n          onChange={saveCurrentInputValue}\r\n          alignment={alignment}\r\n          randomizeOrder={randomizeOrder}\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n\r\n\r\n  /**\r\n   * Renders a multiline text input field (<textarea...)\r\n   */\r\n  const renderTextArea = ({ name, label, rows, placeholder, isOptional }) => {\r\n    registerRequiredInputField(name, !isOptional)\r\n    const curVal = completedInputFields?.[name] || null\r\n    return (\r\n      <div key={name} className=\"border-1 border-solid bg-gray-200 p-5\">\r\n        <TextArea\r\n          className=\"w-full p-5\"\r\n          onChange={saveCurrentInputValue}\r\n          onComplete={() => { }}\r\n          isRequired={!isOptional}\r\n          label={label}\r\n          name={name}\r\n          rows={rows}\r\n          placeholder={placeholder}\r\n          defaultValue={curVal}\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  /**\r\n   * Renders a single line (<input ..) or a multiline (<textarea.. ) input field\r\n   */\r\n  const renderTextInput = ({ name, label, rows, placeholder, isOptional }) => {\r\n    if (rows > 1) {\r\n      return renderTextArea({ name, label, rows, placeholder })\r\n    }\r\n\r\n    registerRequiredInputField(name, !isOptional)\r\n    const curVal = completedInputFields?.[name] || null\r\n    return (\r\n      <div key={name} className=\"border-1 border-solid bg-gray-200 p-5\">\r\n        <TextInput\r\n          className=\"w-full p-5\"\r\n          onBlur={saveCurrentInputValue}\r\n          onChange={() => null}\r\n          onComplete={saveCurrentInputValue}\r\n          label={label}\r\n          name={name}\r\n          rows={rows}\r\n          placeholder={placeholder}\r\n          defaultValue={curVal}\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const renderNumericalInput = ({ name, label, rows, placeholder, isOptional }) => {\r\n    if (rows > 1) {\r\n      return renderTextArea({ name, label, rows, placeholder })\r\n    }\r\n\r\n    registerRequiredInputField(name, !isOptional)\r\n    const curVal = completedInputFields?.[name] || 0\r\n    return (\r\n      <div key={name} className=\"border-1 border-solid bg-gray-200 p-5\">\r\n        <NumericalInput\r\n          className=\"w-full p-5\"\r\n          onBlur={saveCurrentInputValue}\r\n          onChange={() => null}\r\n          onComplete={saveCurrentInputValue}\r\n          label={label}\r\n          name={name}\r\n          rows={rows}\r\n          placeholder={placeholder}\r\n          defaultValue={curVal}\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const renderDropDown = ({ name, label, options, isOptional }) => {\r\n    registerRequiredInputField(name, !isOptional)\r\n    return (\r\n      <div key={name} className=\"border-1 border-solid bg-gray-200 p-5\">\r\n        <DropDown\r\n          name={name}\r\n          label={label}\r\n          options={options}\r\n          onValueSelect={saveCurrentInputValue}\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const renderResearchSimulation = ({ name, label, placeholder, notFoundMessage, labelOpenDocument }) => {\r\n    return (\r\n      <div key={name} className=\"border-1 border-solid bg-gray-200 p-5\">\r\n        <ResearchSimulation\r\n          name={name}\r\n          labe={label}\r\n          placeholder={placeholder}\r\n          notFoundMessage={notFoundMessage}\r\n          labelOpenDocument={labelOpenDocument}\r\n          onSearchHistoryChanged={saveCurrentInputValue}\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const registerOpen = (url, name) => {\r\n    return (e) => {\r\n      saveCurrentInputValue(\r\n        {\r\n          target: {\r\n            name: name,\r\n            value: { url: url, time_: new Date().getTime(), time: new Date().toISOString() }\r\n          }\r\n        }\r\n      )\r\n    }\r\n  }\r\n\r\n  const renderLinkThumbnail = ({ url, target, name, title, isOptional }) => {\r\n    registerRequiredInputField(name, !isOptional)\r\n\r\n    return (\r\n      <a href={url} target={target} onClick={registerOpen(url, name)}>\r\n        <div key={name} className=\"border-1 border-solid bg-gray-100 p-5 w-auto hover:bg-gray-200\">\r\n          {title}\r\n        </div>\r\n      </a>\r\n    )\r\n  }\r\n\r\n  const renderPickVersion = ({ name, isOptional, versions }) => {\r\n    const numVersions = versions?.length\r\n    if (numVersions < 1) return null\r\n\r\n    const a = new Uint32Array(1) //@TODO this is a hack just considering 2 versions - needs to be fixed if you wand pick more than 2 versions\r\n    const choosenVersion = completedInputFields[name] || (crypto.getRandomValues(a)[0].toString()[1]) % numVersions\r\n\r\n    stashInput(name, choosenVersion)\r\n    const res = versions[choosenVersion].elements?.map((el, idx) => {\r\n      if (!el.module) return null\r\n\r\n      if (el.module !== 'subsections') {\r\n        return <div className=\"__element p-2\" key={idx}>{renderIncludedElement(el)}</div>\r\n      }\r\n\r\n      return null\r\n    })\r\n\r\n    return <div key={name}>{res}</div>\r\n  }\r\n\r\n  const renderAside = (elements) => {\r\n    const sideElements = elements.map((el, idx) => {\r\n      if (!el.module) return null\r\n\r\n      if (el.module !== 'subsections') {\r\n        return <div className=\"__element p-2\" key={el.id}>{renderIncludedElement(el)}</div>\r\n      }\r\n\r\n      return null\r\n    })\r\n\r\n    return (<div className=\"absolute right-0 top-0 h-screen\">\r\n      <div className=\"__element p-2 sticky right-0 top-0\">\r\n        {sideElements}\r\n      </div>\r\n    </div>)\r\n  }\r\n\r\n\r\n\r\n  const renderSelfAssessment = (data) => {\r\n    return (\r\n      <div key={data.name} className=\"border-1 border-solid bg-gray-200 p-5\">\r\n        <SelfAssessment\r\n          data={data}\r\n          onAllChosen={saveCurrentInputValue}\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  /**\r\n   * Renders an element inside a cell or section\r\n   */\r\n  const renderIncludedElement = ({ data, elements, module }) => {\r\n    let content = null\r\n    data.id = renderedElementId++\r\n\r\n    switch (module.toLowerCase()) {\r\n      case 'aside':\r\n        content = renderAside(elements)\r\n        break\r\n      case 'selfassessment':\r\n        content = renderSelfAssessment(data)\r\n        break\r\n      case 'linkthumbnail':\r\n        content = renderLinkThumbnail(data)\r\n        break\r\n      case 'researchsimulation':\r\n        content = renderResearchSimulation(data)\r\n        break\r\n      case 'dropdown':\r\n        content = renderDropDown(data)\r\n        break\r\n      case 'selectfromrange':\r\n        content = renderSelectFromRange(data)\r\n        break\r\n      case 'slider':\r\n        content = renderSlider(data)\r\n        break\r\n      case 'headline':\r\n        content = renderHeadline(data)\r\n        break\r\n      case 'boxedtext':\r\n        content = renderBoxedText(data)\r\n        break\r\n      case 'bulletlist':\r\n        content = renderBulletList(data)\r\n        break\r\n      case 'pickversion':\r\n        content = renderPickVersion(data)\r\n        break\r\n      case 'text':\r\n        content = renderText(data)\r\n        break\r\n      case 'textarea':\r\n      case 'textinput':\r\n        content = renderTextInput(data)\r\n        break\r\n      case 'numericalinput':\r\n        content = renderNumericalInput(data)\r\n        break\r\n      default:\r\n        break\r\n    }\r\n\r\n    return content\r\n  }\r\n\r\n  /**\r\n   * Renders a collection of sections (including all nested subsections)\r\n   */\r\n  const renderSections = (secs, depth) => {\r\n    let content = null\r\n\r\n    return secs.map((sec, secIdx) => {\r\n      const elements = sec.elements.map((el, idx) => {\r\n        if (!el.module) return null\r\n\r\n        if (el.module !== 'subsections') {\r\n          content = renderIncludedElement(el)\r\n\r\n          return <div className=\"__element p-2\" key={`${el.id}`}>{content}</div>\r\n        } else {\r\n          content = renderSections(el.sections, depth + 1)\r\n\r\n          return content\r\n        }\r\n      })\r\n\r\n      if (depth === 1) {\r\n        return (\r\n          <div className=\"p-6 border my-1 border-solid\" key={`sect-${depth}:${secIdx}`}>\r\n            {elements}\r\n          </div>\r\n        )\r\n      } else {\r\n        return (\r\n          <div className=\"__subsection\" key={`subsect-${depth}:${secIdx}`}>\r\n            {elements}\r\n          </div>\r\n        )\r\n      }\r\n    })\r\n  }\r\n\r\n  const formContent = renderSections(formSections, 1)\r\n  return <>\r\n    {formContent}\r\n  </>\r\n}, propsAreEqual)","export const SimpleModal = ({ title, text, buttons, onAccept, onReject }) => {\r\n  return (\r\n    <div className=\"fixed inset-0 bg-gray-600 bg-opacity-70 h-full w-full\">\r\n      <div className=\"md:w-1/2 bg-white m-auto my-10\">\r\n        <div className=\"flex w-full bg-gray-400 p-3 text-white text-2xl\">\r\n          <div className=\"flex-grow text-center\">{title}</div>\r\n        </div>\r\n        <div className=\"p-6 lg:text-lg md:text-md\">\r\n          {text.map((t, idx) => {\r\n            return <p className=\"p-5 py-2\" key={idx}>{t}</p>\r\n          })}\r\n        </div>\r\n        <div className=\"flex pl-6\">\r\n          <button className=\"flex-grow flex-1 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline m-5\" onClick={onAccept}>{buttons.accept}</button>\r\n          <button className=\"flex-grow flex-1 bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline m-5\" onClick={onReject}>{buttons.reject}</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}","import { useEffect, useMemo, useState } from 'react'\r\nimport clsx from 'clsx'\r\nimport { FormBuilder } from './formbuilder/FormBuilder'\r\nimport { SimpleModal } from './simplemodal/SimpleModal'\r\n\r\n\r\nexport const SurveyPage = ({ page, onComplete, onChange, onNextPage, onPrevPage, defaultValues }) => {\r\n  const allowProceed = useMemo(() => page.settings?.allowProceed, [page, page.thisId])\r\n  const [currentPageIsComplete, setCurrentPageIsComplete] = useState(false)\r\n  const [modalContent, setModalContent] = useState({ show: false })\r\n  const [formData, setFormData] = useState(defaultValues)\r\n\r\n  const lockNextButton = () => {\r\n    if (allowProceed === true) {\r\n      setCurrentPageIsComplete(true)\r\n    } else {\r\n      setCurrentPageIsComplete(false)\r\n    }\r\n  }\r\n\r\n\r\n  useEffect(() => {\r\n    setCurrentPageIsComplete(allowProceed)\r\n  }, [allowProceed, setCurrentPageIsComplete])\r\n\r\n  const triggerNextPage = (e) => {\r\n    if (page.nextId) {\r\n      if (page.settings?.confirmMoveForward) {\r\n        const { title, text, buttons } = page.settings?.confirmMoveForward\r\n\r\n        setModalContent({\r\n          show: true,\r\n          title,\r\n          text,\r\n          buttons,\r\n          onAccept: () => {\r\n            setModalContent({ show: false })\r\n            lockNextButton()\r\n            onNextPage()\r\n          },\r\n          onReject: () => { setModalContent({ show: false }) }\r\n        })\r\n      } else {\r\n        setModalContent({ show: false })\r\n        lockNextButton()\r\n        onNextPage()\r\n      }\r\n    } else {\r\n      lockNextButton()\r\n      onNextPage()\r\n    }\r\n  }\r\n\r\n  const triggerPrevPage = (e) => {\r\n    if (page.prevId) {\r\n      onPrevPage()\r\n    }\r\n  }\r\n\r\n  const handleFormChanged = (formName, formData) => {\r\n    formData._timeComplete = new Date().getTime()\r\n    formData.timeComplete = new Date().toISOString()\r\n    setFormData(formData)\r\n    onChange(formName, formData)\r\n  }\r\n\r\n  const handleFormComplete = (formName, formData) => {\r\n    setFormData(formData)\r\n    setCurrentPageIsComplete(true)\r\n  }\r\n\r\n  const renderBackButton = () => {\r\n    if (page.settings?.allowMoveBack !== true) {\r\n      return null\r\n    }\r\n\r\n    return (\r\n      <button className={clsx({\r\n        \"m-5 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\": currentPageIsComplete === true\r\n      })} type=\"button\" onClick={triggerPrevPage}>\r\n        Zurück\r\n      </button>\r\n    )\r\n  }\r\n\r\n  const renderNextButton = () => {\r\n    if (page.nextId === null) {\r\n      page.labelNextPage = 'Umfrage beenden'\r\n    }\r\n\r\n    return (<button disabled={currentPageIsComplete === false && 'disabled'} className={clsx({\r\n      \"m-5 bg-blue-300 text-white font-bold py-2 px-4 rounded opacity-50 cursor-not-allowed\": currentPageIsComplete === false,\r\n      \"m-5 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\": currentPageIsComplete === true\r\n    })} type=\"button\" onClick={triggerNextPage}>\r\n      {page.labelNextPage || 'Weiter'}\r\n    </button>)\r\n  }\r\n\r\n  const backButton = renderBackButton()\r\n  const nextButton = renderNextButton()\r\n\r\n  const {\r\n    show,\r\n    title,\r\n    text,\r\n    buttons,\r\n    onAccept,\r\n    onReject\r\n  } = modalContent\r\n\r\n  const modalWindow = show ?\r\n    <SimpleModal\r\n      title={title}\r\n      text={text}\r\n      buttons={buttons}\r\n      onAccept={onAccept}\r\n      onReject={onReject}\r\n    />\r\n    : null\r\n\r\n  return (\r\n    <div key={page.thisId}>\r\n      {(page.sections?.length > 0) ?\r\n        <FormBuilder\r\n          formSections={page.sections}\r\n          formName={`page:${page.thisId.toString().padStart(2, '0')}`}\r\n          onFormChanged={handleFormChanged}\r\n          onFormComplete={handleFormComplete}\r\n          defaultValues={formData[page.thisId]}\r\n        /> :\r\n        null}\r\n\r\n      <div className=\"flex items-center justify-between\">\r\n        {backButton}\r\n        {nextButton}\r\n      </div>\r\n\r\n      {modalWindow}\r\n    </div>\r\n  )\r\n}","import { useState } from 'react'\r\nimport { SurveyPage } from './SurveyPage'\r\n\r\n\r\nconst getPage = (pageSet, pageId) => {\r\n  const pages = pageSet.filter(val => val.thisId === pageId)\r\n  if (pages.length > 1) { console.error(`Found more than 1 page with id (${pageId})`) }\r\n  return pages[0]\r\n}\r\n\r\nconst getFirstPage = (pageSet) => {\r\n  const rootPages = pageSet.filter(val => val.prevId === null)\r\n  if (rootPages.length > 1) { console.error('Found more than 1 root page') }\r\n  return rootPages[0]\r\n}\r\n\r\nexport const SurveyQuestionaire = ({ pages, onChange, onComplete, defaultValues }) => {\r\n  const [currentPage, setCurrentPage] = useState(null)\r\n\r\n  if (!pages || pages.length < 1) {\r\n    console.error('No pages defined in survey')\r\n    return null\r\n  }\r\n\r\n  if (!currentPage) {\r\n    const firstPage = getFirstPage(pages)\r\n    if (firstPage && firstPage.thisId >= 0) {\r\n      setCurrentPage(firstPage)\r\n    }\r\n    return null\r\n  }\r\n\r\n  const triggerNextPage = () => {\r\n    if (currentPage.nextId) {\r\n      setCurrentPage(getPage(pages, currentPage.nextId))\r\n      window.scrollTo(0, 0)\r\n    } else {\r\n      onComplete()\r\n    }\r\n  }\r\n\r\n  const triggerPrevPage = () => {\r\n    if (currentPage.prevId) {\r\n      setCurrentPage(getPage(pages, currentPage.prevId))\r\n    }\r\n  }\r\n\r\n  const handleFormPageCompleted = (formName, formData) => {\r\n    //onComplete(formName, formData)\r\n  }\r\n\r\n  const handleFormPageChanged = (formName, formData) => {\r\n    onChange(formName, formData)\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"flex justify-end\">\r\n        <div className=\"text-white bg-gray-400 px-2 py-0\">\r\n          Seite: {currentPage.thisId}\r\n        </div>\r\n      </div>\r\n      <SurveyPage\r\n        page={currentPage}\r\n        onChange={handleFormPageChanged}\r\n        onComplete={handleFormPageCompleted}\r\n        onNextPage={triggerNextPage}\r\n        onPrevPage={triggerPrevPage}\r\n        defaultValues={defaultValues[currentPage.thisId] || {}}\r\n      />\r\n    </>\r\n  )\r\n}","import { useState } from 'react'\r\nimport { SurveyQuestionaire } from './SurveyQuestionaire'\r\n\r\n\r\nexport const SurveyManager = ({ ruleSet, onSaveData, sessionId }) => {\r\n  const [surveyIsComplete, setSurveyIsComplete] = useState(false)\r\n  const [surveyData, setSurveyData] = useState({\r\n    sessionId: sessionId,\r\n    surveyId: ruleSet.meta.surveyId\r\n  })\r\n\r\n  const handleQuestionaireComplete = (pageId, data) => {\r\n    let sd = Object.assign({}, surveyData)\r\n    sd[pageId] = data\r\n    delete sd.undefined\r\n    onSaveData(sd)\r\n    setSurveyIsComplete(true)\r\n  }\r\n\r\n  const handleQuestionaireChange = (pageId, data) => {\r\n    let sd = Object.assign({}, surveyData)\r\n    sd[pageId] = data\r\n    setSurveyData(sd)\r\n  }\r\n\r\n  return surveyIsComplete ? (\r\n    <div className='flex h-screen'>\r\n      <div className='text-black font-bold text-3xl m-auto text-4xl'>\r\n        Umfrage beendet. Du darfst das Fenster jetzt schließen.\r\n      </div>\r\n    </div>\r\n  ) : (\r\n    <>\r\n      <SurveyQuestionaire\r\n        sessionId={sessionId}\r\n        pages={ruleSet?.pages}\r\n        onChange={handleQuestionaireChange}\r\n        onComplete={handleQuestionaireComplete}\r\n        defaultValues={surveyData}\r\n      />\r\n    </>\r\n  )\r\n}","import { useEffect, useState } from 'react'\r\nimport clsx from 'clsx'\r\n\r\nfunction escVal(val) {\r\n  return JSON.stringify(val)\r\n}\r\n\r\nfunction ExportApp() {\r\n  const [jsonIsValid, setJsonIsValid] = useState(false)\r\n  const [jsonParsed, setJsonParsed] = useState(false)\r\n  const [resultCsv, setResultCsv] = useState('')\r\n\r\n  function convertToCsv(headings, data) {\r\n    let res = ''\r\n    res += headings.map((val) => (`\"${val}\"`)).join(';') + '\\n'\r\n    data.forEach((line) => res += line.map((val) => (`${escVal(val || '')}`)).join(';') + '\\n')\r\n    return res\r\n  }\r\n\r\n  function resolveSearchHistory(searchTrials) {\r\n    let memTimeOpen = null\r\n\r\n    let cueReadingTimes = []\r\n    // initialize for every cue with 0\r\n    for (let i = 1; i <= 23; i++) {\r\n      cueReadingTimes[i] = 0\r\n    }\r\n\r\n    if (!searchTrials) {\r\n      return [-1, -1, -1, [], []]\r\n    }\r\n\r\n    searchTrials.forEach(trial => {\r\n\r\n      if (trial.action === 'OPEN') {\r\n        memTimeOpen = trial.time_\r\n      }\r\n\r\n      if (trial.action === 'CLOSE') {\r\n        const diff = trial.time_ - memTimeOpen\r\n        memTimeOpen = null\r\n\r\n        if (trial.info?.url) {\r\n          cueReadingTimes[parseInt(trial.info?.url.match(/[0-9]+/gi), 10)] += diff\r\n        }\r\n      }\r\n    })\r\n\r\n    let foundCues = 0\r\n\r\n    const resCues = Object.keys(cueReadingTimes).map((k) => {\r\n      const v = cueReadingTimes[k]\r\n      if (v === 0) return [\"0\", \"0\"]\r\n      if (v >= 1) {\r\n        foundCues++\r\n        return [\"1\", v / 1000]\r\n      }\r\n    })\r\n\r\n    let totalTrials = 0\r\n    let tmp = []\r\n\r\n    const resSearches = searchTrials.reduce((acc, trial) => {\r\n      if (trial.action === 'SEARCH-FAILED' || trial.action === 'SEARCH-SUCCESS') {\r\n        if (tmp.indexOf(trial.info) == -1) {\r\n          tmp.push(trial.info)\r\n        }\r\n        totalTrials++\r\n        acc.push(trial.info)\r\n        acc.push(trial.action === 'SEARCH-SUCCESS' ? '1' : '0')\r\n      }\r\n      return acc\r\n    }, [])\r\n\r\n    const uniqueSearchTerms = tmp.length\r\n\r\n    return [\r\n      totalTrials,\r\n      uniqueSearchTerms,\r\n      foundCues,\r\n      resCues.flat(),\r\n      resSearches\r\n    ].flat()\r\n  }\r\n\r\n  function triggerExport(e) {\r\n    let csvDataLines = []\r\n    let headings = [\r\n      \"sessionId\",\r\n      \"startDate\",\r\n      \"totalTimeSecs\",\r\n      \"total1\",\r\n      \"total2\",\r\n      \"total3\",\r\n      'GClikelihoodpre', // q3:1\r\n      'ConfidencePre', // q3:2\r\n      'Condition', // p4_version\r\n      \"Paradoxicalstatement1\", // q4:1_v1\r\n      \"Paradoxicalstatement2\", // q4:2_v1\r\n      \"Paradoxicalstatement3\", // q4:3_v1\r\n      \"Interestingstatement1\", // q4:1_v2\r\n      \"Interestingstatement2\", // q4:2_v2\r\n      \"Interestingstatement3\", // q4:3_v2\r\n      \"BewertungCues\", // q6:1\r\n      \"GClikelihoodpost\", // q6:2\r\n      \"ConfidencePost\", // q6:3\r\n      \"WichtigsteInformationen\", // q6:4\r\n      \"Creativityscore1\", // q7:score1\r\n      \"Creativityscore2\", // q7:score2\r\n      \"MCParadoxicalstatements\", // q8:1\r\n      \"RealismCase\", // q8:2\r\n      \"DifficultyCase\", // q8:3\r\n      \"PositioninFirm\", // q9:1\r\n      \"Yearsinfirm\", // q9:2\r\n      \"MonthsAudit\", // q9:3\r\n      \"GoingconcernExperience\", // q9:4\r\n      \"FamiliarityAuditstandards\", // q9:5\r\n      \"Age\", // q9:6\r\n      \"Gender\", // q9:7\r\n      \"GewünschteInformationen\", // q10:1\r\n      \"Anmerkungen\", // q10:2\r\n      \"InfobyMail\", // q10:3\r\n      \"Mail\",  // q10:4\r\n      \"totalSearchTerms\",\r\n      \"uniqueSearchTerms\",\r\n      \"foundCues\",\r\n    ]\r\n\r\n    for (let i = 1; i <= 23; i++) {\r\n      headings.push(`cue${i}-open?`)\r\n      headings.push(`cue${i}-time`)\r\n    }\r\n\r\n    const res = Object.keys(jsonParsed.surveys['2022-going-concern']).map((key) => {\r\n      const val = jsonParsed.surveys['2022-going-concern'][key]['data']\r\n\r\n      let tmp = [\r\n        (val['sessionId'].toString().substring(0, 9) || \"\"),\r\n        (val['startDate']),\r\n        (val['completionTimeInSeconds']),\r\n        (Math.ceil((val['page:04']?.['_timeComplete'] - val['_startDate']) / 1000)),\r\n        (Math.ceil((val['page:05']?.['_timeComplete'] - val['page:04']?.['_timeComplete']) / 1000)),\r\n        (Math.ceil((val['_endDate'] - val['page:05']?.['_timeComplete']) / 1000)),\r\n        (val['page:03']?.[\"q3:1\"] || \"\"),\r\n        (val['page:03']?.[\"q3:2\"] || \"\"),\r\n        (val['page:04']?.[\"p4_version\"] ? \"2\" : \"1\"),\r\n        (val['page:04']?.[\"q4:1_v1\"] || \"\"),\r\n        (val['page:04']?.[\"q4:2_v1\"] || \"\"),\r\n        (val['page:04']?.[\"q4:3_v1\"] || \"\"),\r\n        (val['page:04']?.[\"q4:1_v2\"] || \"\"),\r\n        (val['page:04']?.[\"q4:2_v2\"] || \"\"),\r\n        (val['page:04']?.[\"q4:3_v2\"] || \"\"),\r\n        (val['page:06']?.[\"q6:1\"] || \"\"),\r\n        (val['page:06']?.[\"q6:2\"] || \"\"),\r\n        (val['page:06']?.[\"q6:3\"] || \"\"),\r\n        (val['page:06']?.[\"q6:4\"] || \"\"),\r\n        (val['page:07']?.[\"q7:1\"]?.[\"score1\"] || \"0\"),\r\n        (val['page:07']?.[\"q7:1\"]?.[\"score2\"] || \"0\"),\r\n        (val['page:08']?.[\"q8:1\"] || \"\"),\r\n        (val['page:08']?.[\"q8:2\"] || \"\"),\r\n        (val['page:08']?.[\"q8:3\"] || \"\"),\r\n        (val['page:09']?.[\"q9:1\"] || \"\"),\r\n        (val['page:09']?.[\"q9:2\"] || \"\"),\r\n        (val['page:09']?.[\"q9:3\"] || \"\"),\r\n        (val['page:09']?.[\"q9:4\"] || \"\"),\r\n        (val['page:09']?.[\"q9:5\"] || \"\"),\r\n        (val['page:09']?.[\"q9:6\"] || \"\"),\r\n        (val['page:09']?.[\"q9:7\"] || \"\"),\r\n        (val['page:10']?.[\"q10:1\"] || \"\"),\r\n        (val['page:10']?.[\"q10:2\"] || \"\"),\r\n        (val['page:10']?.[\"q10:3\"] || \"\"),\r\n        (val['page:10']?.[\"q10:4\"] || \"\"),\r\n        resolveSearchHistory(val['page:05']?.[\"q5:1_search_history\"], val).flat()\r\n      ].flat()\r\n\r\n      return tmp\r\n    })\r\n\r\n    const csvRes = convertToCsv(headings, res)\r\n    setResultCsv(csvRes)\r\n  }\r\n\r\n  function checkIfJsonIsValid(e) {\r\n    const jsonTxt = e.target.value\r\n    if (jsonTxt.length > 0) {\r\n      try {\r\n        const jsonObj = JSON.parse(jsonTxt)\r\n        setJsonIsValid(true)\r\n        setJsonParsed(jsonObj)\r\n      } catch (error) {\r\n        setJsonIsValid(false)\r\n        setJsonParsed(null)\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className='p-10'>\r\n      <h3 className='text-2xl font-bold'>Export JSON To CSV</h3>\r\n      <p className='my-6'>Bitte den JSON Text aus dem Firebase export in dieses Feld kopieren und dann den Export-Button drücken.</p>\r\n\r\n      <p><label>JSON</label></p>\r\n      <textarea heigth=\"20\" cols=\"10\"\r\n        className=\"border border-black w-full h-96\"\r\n        onChange={checkIfJsonIsValid}\r\n      ></textarea>\r\n      <button className={clsx({\r\n        \"m-5 bg-blue-300 text-white font-bold py-2 px-4 rounded opacity-50 cursor-not-allowed\": jsonIsValid === false,\r\n        \"m-5 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\": jsonIsValid === true\r\n      })} type=\"button\" onClick={triggerExport}>\r\n        Export\r\n      </button>\r\n\r\n      <p><label>CSV</label></p>\r\n      <textarea heigth=\"20\" cols=\"10\"\r\n        className=\"border border-black w-full h-96\"\r\n        onChange={checkIfJsonIsValid}\r\n        defaultValue={resultCsv}\r\n      ></textarea>\r\n      <p className='my-6'>Bitte den CSV Text in eine Datei mit der Endung .csv kopieren</p>\r\n\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ExportApp\r\n","import { useEffect, useState } from 'react'\r\nimport { SurveyManager } from './components/survey/SurveyManager'\r\nimport axios from 'axios'\r\nimport CryptoJS from 'crypto-js'\r\nimport sha256 from 'crypto-js/sha256'\r\nimport { initializeApp } from 'firebase/app'\r\nimport { getDatabase, ref, set, push, child, update } from \"firebase/database\"\r\nimport { Routes, Route } from \"react-router-dom\"\r\nimport ExportApp from './ExportApp'\r\n\r\n// Your web app's Firebase configuration\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyCFasaqUqOltO4gxPbNmR4gYQqusN2Zthg\",\r\n  authDomain: \"escp-survey-2022.firebaseapp.com\",\r\n  databaseURL: \"https://escp-survey-2022-default-rtdb.europe-west1.firebasedatabase.app\",\r\n  projectId: \"escp-survey-2022\",\r\n  storageBucket: \"escp-survey-2022.appspot.com\",\r\n  messagingSenderId: \"105376003688\",\r\n  appId: \"1:105376003688:web:8a1b08d2a162565648eddd\"\r\n}\r\n\r\n// Initialize Firebase\r\ninitializeApp(firebaseConfig)\r\nconst dbDatabase = getDatabase()\r\nconst startDate = new Date()\r\n\r\nconst getRandomHash = () => {\r\n  const hash = sha256(Math.random().toString() + new Date().getUTCMilliseconds.toString())\r\n  return hash.toString(CryptoJS.enc.Hex)\r\n}\r\n\r\nconst getDatePrefix = (now) => {\r\n  return now.getFullYear().toString() +\r\n    (now.getMonth() + 1).toString().padStart(2, '0') +\r\n    now.getDate().toString().padStart(2, '0') + '_' +\r\n    now.getHours().toString().padStart(2, '0') +\r\n    now.getMinutes().toString().padStart(2, '0') +\r\n    now.getSeconds().toString().padStart(2, '0') +\r\n    now.getMilliseconds().toString().padStart(2, '0')\r\n}\r\n\r\nconst surveySessionId = getRandomHash()\r\n\r\nconst writeToDatabase = (data) => {\r\n  const endDate = new Date()\r\n  data._startDate = startDate.getTime()\r\n  data.startDate = new Date(startDate).toISOString()\r\n  data._endDate = endDate.getTime()\r\n  data.endDate = new Date(endDate).toISOString()\r\n  data.completionTimeInMinutes = Math.round((data._endDate - data._startDate) / 60000)\r\n  data.completionTimeInSeconds = Math.round((data._endDate - data._startDate) / 1000)\r\n\r\n  const emailAddress = data['page:10']?.['q10:4']?.toString()\r\n  if (emailAddress) { data['page:10']['q10:4'] = 'moved to mailinglist' }\r\n\r\n  set(ref(dbDatabase, `surveys/${data.surveyId}/${getDatePrefix(endDate)}_${data.sessionId.toString().substr(0, 10)}`), {\r\n    data: data\r\n  })\r\n    .then(() => {\r\n      console.log('Survey Data Saved successfully!', data)\r\n    })\r\n    .catch((error) => {\r\n      console.error('Not Saved successfully!')\r\n    })\r\n\r\n  if (emailAddress && data['page:10']['q10:3'] === 'y') {\r\n\r\n    const newMailKey = push(child(ref(dbDatabase), `mailinglists/survey-${data.surveyId}`)).key\r\n    const updates = {}\r\n    updates[`mailinglists/survey-${data.surveyId}/` + newMailKey] = { email: emailAddress }\r\n\r\n    update(ref(dbDatabase), updates).then(() => {\r\n      console.log('E-Mail Saved successfully!')\r\n    })\r\n      .catch((error) => {\r\n        console.error('E-Mail Not Saved successfully!')\r\n      })\r\n  }\r\n}\r\n\r\nconst validateRuleSet = (unvalidatedRules) => {\r\n  // @TODO verify the structure of the survey.json (using ajv?) in order to avoid unnescessary problems with broken json\r\n\r\n  return unvalidatedRules\r\n}\r\n\r\nfunction SurveyApp() {\r\n  const [surveyControlData, setSurveyControlData] = useState(null)\r\n\r\n  useEffect(() => {\r\n    // this json contains the variables and steering commands for customizing survey\r\n    axios.get('./content/survey.json').then(response => {\r\n      const validRuleSet = validateRuleSet(response.data)\r\n\r\n      if (validRuleSet) {\r\n        setSurveyControlData(validRuleSet)\r\n      } else {\r\n        console.log('Control data invalid.')\r\n      }\r\n    })\r\n  }, [])\r\n\r\n  return surveyControlData ? (\r\n    <div className=\"container max-w-screen-md ml-auto mr-auto\">\r\n      <SurveyManager ruleSet={surveyControlData} onSaveData={writeToDatabase} sessionId={surveySessionId} />\r\n    </div>\r\n  ) : (\r\n    <div className='flex h-screen'>\r\n      <div className='m-auto text-6xl'>Daten werden geladen...</div>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n\r\nconst initBeforeUnLoad = (showExitPrompt) => {\r\n  window.onbeforeunload = (event) => {\r\n    if (showExitPrompt) {\r\n      const e = event || window.event\r\n      e.preventDefault()\r\n      if (e) {\r\n        e.returnValue = ''\r\n      }\r\n      return ''\r\n    }\r\n  }\r\n}\r\n\r\n// Hook\r\nfunction useExitPrompt(bool) {\r\n  const [showExitPrompt, setShowExitPrompt] = useState(bool)\r\n\r\n  window.onload = function () {\r\n    initBeforeUnLoad(showExitPrompt)\r\n  }\r\n\r\n  useEffect(() => {\r\n    initBeforeUnLoad(showExitPrompt)\r\n  }, [showExitPrompt])\r\n\r\n  return [showExitPrompt, setShowExitPrompt]\r\n}\r\n\r\n\r\n\r\nfunction App() {\r\n  const [showExitPrompt, setShowExitPrompt] = useExitPrompt(true)\r\n\r\n  //NOTE: this similar to componentWillUnmount()\r\n  useEffect(() => {\r\n    return () => {\r\n      setShowExitPrompt(false)\r\n    }\r\n  }, [])\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <Routes>\r\n        <Route path=\"/export\" element={<ExportApp />} />\r\n        <Route path=\"/\" element={<SurveyApp />} />\r\n      </Routes>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport './index.css'\r\nimport App from './App'\r\nimport reportWebVitals from './reportWebVitals'\r\nimport { BrowserRouter, HashRouter } from \"react-router-dom\"\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <HashRouter>\r\n      <App />\r\n    </HashRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n)\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals()\r\n"],"sourceRoot":""}