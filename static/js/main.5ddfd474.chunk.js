(this["webpackJsonpsurvey-gc2021"]=this["webpackJsonpsurvey-gc2021"]||[]).push([[0],{106:function(e,t,n){"use strict";n.r(t);var a=n(7),r=n.n(a),l=n(52),c=n.n(l),s=(n(61),n(6)),o=n(27),i=n(23),u=n(14),d=n(1),b=["name","label","options","onValueSelect"],h=function(e){var t=e.name,n=e.label,a=e.options,r=e.onValueSelect;Object(u.a)(e,b);return Object(d.jsxs)("div",{className:"p-0 border border-solid",children:[Object(d.jsx)("div",{className:"font-bold pb-5",children:n}),Object(d.jsx)("select",{name:t,onChange:r,children:a.map((function(e,t){return Object(d.jsx)("option",{value:e.value,children:e.label},t)}))})]},t)},j=n(34),f=n.n(j),m=["name","onSearchHistoryChanged"],g=null,v=function(e){var t=e.name,n=e.onSearchHistoryChanged,r=(Object(u.a)(e,m),Object(a.useState)("")),l=Object(s.a)(r,2),c=l[0],i=l[1],b=Object(a.useState)({init:!0}),h=Object(s.a)(b,2),j=h[0],v=h[1],x=Object(a.useState)([]),p=Object(s.a)(x,2),O=p[0],w=p[1],y=Object(a.useState)({title:null,url:null,viewerIsOpen:!1}),N=Object(s.a)(y,2),S=N[0],k=N[1],I=Object(a.useState)(null),C=Object(s.a)(I,2),F=C[0],E=C[1];Object(a.useEffect)((function(){f.a.get("./content/research-simulation.json").then((function(e){var t=function(e){var t,n,a;if(null===e||void 0===e||!e.researchSimulation)throw Error("Die Daten in research-simulation.json sind ung\xfcltig!");if(null===(t=e.researchSimulation)||void 0===t||!t.config)throw Error('Abschnitt "config: { ... }" in research-simulation.json fehlt!');if(!(null!==(n=e.researchSimulation)&&void 0!==n&&null!==(a=n.cues)&&void 0!==a&&a.length)>0)throw Error('Abschnitt "cues": [ ... ] in research-simulation.json fehlt oder ist leer!');try{e.researchSimulation.cues.forEach((function(e){var t=e.id,n=e.title,a=e.keywords,r=e.url;if(!t||"number"!==typeof t)throw Error('Fehlendes oder ung\xfcltiges Attribute "id" (keine Zahl?) in '.concat(JSON.stringify(e)));if(!n||"string"!==typeof n||(null===n||void 0===n?void 0:n.length)<1)throw Error('Fehlendes oder ung\xfcltiges Attribute "title" (keine Zeichenkette?) in '.concat(JSON.stringify(e)));if(!a||!(null!==a&&void 0!==a&&a.length)>1)throw Error('Fehlendes oder ung\xfcltiges Attribute "keywords" (keine Zeichenkette?) in '.concat(JSON.stringify(e)));if(!r||!(null!==r&&void 0!==r&&r.length)>1)throw Error('Fehlendes oder ung\xfcltiges Attribute "url" (keine Zeichenkette?) in '.concat(JSON.stringify(e)))}))}catch(r){throw console.error(r),JSON.stringify(r.message)}return e}(e.data);t?E(t):console.log("Control data invalid.")}))}),[]);var _=function(e,a){var r=O;r.push({time:(new Date).getTime(),action:e,info:a}),w(r),n({target:{name:t,value:r}})},D=function(e){var t=c.toLowerCase().split(";").reduce((function(e,t){var n;return 0===t.length||(null===(n=F.researchSimulation)||void 0===n?void 0:n.cues.filter((function(e){return e.keywords.toLowerCase().indexOf(t)>-1}))).forEach((function(t){e[t.id]=t})),e}),{});_("SEARCH",c),v(t)};return Object(d.jsxs)("div",{className:"container mx-auto",children:[Object(d.jsx)("h1",{className:"text-3xl pb-4",children:"Recherche"}),Object(d.jsxs)("div",{className:"bg-blue-50 shadow-md px-8 pt-6 pb-8 mb-4",children:[Object(d.jsx)("div",{className:"mb-4",children:Object(d.jsx)("input",{autoFocus:!0,onKeyPress:function(e){"Enter"===e.key&&c.length>=4&&D()},onChange:function(e){i(e.target.value)},className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"keywords",type:"text",placeholder:"Suchbegriffe (min. ".concat(4," Buchstaben) hier eingeben...")})}),Object(d.jsx)("div",{className:"flex items-center justify-between",children:Object(d.jsx)("button",{disabled:c.length<4&&"disabled",className:Object(o.a)({"bg-blue-300 text-white font-bold py-2 px-4 rounded opacity-50 cursor-not-allowed":c.length<4,"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline":c.length>=4}),type:"button",onClick:D,children:"Suchen"})})]}),!0!==j.init&&0===Object.keys(j).length&&Object(d.jsx)("div",{className:"bg-gray-50 p-10 my-10",children:Object(d.jsx)("div",{children:"Wir haben leider keine passenden Ergebnisse zu Ihrer Suchanfrage gefunden... Bitte versuchen Sie es mit anderen Suchbegriffen."})}),!0!==j.init&&Object.keys(j).map((function(e){return Object(d.jsxs)("div",{className:"bg-gray-50 p-5 my-1 border-gray-500",children:[Object(d.jsx)("div",{className:"font-bold",children:j[e].title}),Object(d.jsx)("div",{className:"text-blue-400",children:Object(d.jsx)("div",{className:"cursor-pointer text-blue-700",onClick:(t=j[e],function(){_("OPEN",t.url);var e=new Date;g=e.getTime(),k({title:t.title,url:t.url,viewerIsOpen:!0})}),children:"Dokument \xf6ffnen"})})]},e);var t})),S.viewerIsOpen&&Object(d.jsxs)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-99 overflow-y-auto h-full w-full",children:[Object(d.jsxs)("div",{className:"flex w-full bg-gray-800 text-white text-xl p-2",children:[Object(d.jsx)("div",{className:"flex-grow text-center pt-4 pl-52 text-2xl font-bold",children:S.title}),Object(d.jsx)("button",{className:"flex-none p-2 cursor-pointer m-2 bg-blue-500 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded focus:outline-none focus:shadow-outline",onClick:function(e){var t=S.url,n=(new Date).getTime()-g;g=null,_("CLOSE",{url:t,durationInSec:n/1e3}),k({title:null,url:null,viewerIsOpen:!1})},children:"Zur\xfcck zur Suchmaske"})]}),Object(d.jsx)("div",{className:"w-full h-full",children:Object(d.jsx)("embed",{src:S.url,type:"application/pdf",frameBorder:"0",scrolling:"auto",height:"100%",width:"100%"})})]})]})},x=function(e){if(e&&!(e.length<1)){var t=null,n=e;do{t=n,n=n.replace(/\[(b|i|u|s)\]([\s\S]*?)\[\/\1\]/g,"<$1>$2</$1>")}while(n!==t);return n=n.replace(/\[br\]*/g,"<br />")}},p=["name","label","options","onValueSelect"],O=function(e){var t=Object(a.useState)(0),n=Object(s.a)(t,2),r=(n[0],n[1]),l=e.name,c=e.label,o=e.options,i=e.onValueSelect,b=(Object(u.a)(e,p),function(e){return r(e.target.value),i(e)});return Object(d.jsxs)("div",{className:"p-0 w-full",children:[Object(d.jsx)("div",{className:"max-w-sm pb-5 font-bold",dangerouslySetInnerHTML:{__html:x(c)||" "}}),Object(d.jsx)("div",{className:"w-full flex",children:o.map((function(e,t){return Object(d.jsxs)("div",{className:"w-full border border-solid",children:[Object(d.jsx)("div",{className:"h-16 font-bold text-center whitespace-pre",dangerouslySetInnerHTML:{__html:x(e.label)||" "}}),Object(d.jsx)("div",{className:"text-center",children:Object(d.jsx)("input",{type:"radio",name:l,value:e.value,onChange:b})}),Object(d.jsx)("div",{className:"text-center",children:e.value})]},t)}))})]},l)},w=["name","min","max","label","unit","onSlideChange"],y=function(e){var t=e.name,n=e.min,r=e.max,l=e.label,c=e.unit,o=e.onSlideChange,b=Object(u.a)(e,w),h=Object(a.useState)(Math.ceil(r/2)),j=Object(s.a)(h,2),f=j[0],m=j[1];return Object(d.jsxs)("div",{className:"p-0",children:[Object(d.jsx)("div",{className:"max-w-sm font-bold pb-5",children:l}),Object(d.jsx)("input",Object(i.a)({type:"range",name:t,min:n,max:r,onChange:function(e){return m(e.target.value),o(e)}},b)),"\xa0",Object(d.jsxs)("span",{children:[f," ",c]})]},t)},N=function(e){return Object(d.jsxs)(d.Fragment,{children:[e.label&&Object(d.jsx)("div",{className:"font-bold pb-5",children:e.label}),Object(d.jsx)("input",Object(i.a)({type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"},e))]})},S=["label","unit"],k=0,I=function(e){var t=e.formSections,n=e.formName,r=e.onFormChanged,l=e.onFormCompleted,c=(e.defaultValues,Object(a.useState)({})),o=Object(s.a)(c,2),b=o[0],j=o[1],f=function(e){return e.paragraphs.map((function(e,t){return Object(d.jsx)("p",{className:"pb-3",dangerouslySetInnerHTML:{__html:x(e)}},t)}))},m=function(){if(!b)return!1;if(b&&Object.keys(b).length<1)return!0;var e=!0;return t.reduce((function(e,t){var n,a=null===(n=t.elements)||void 0===n?void 0:n.reduce((function(e,t){var n;return"input"===(null===(n=t.type)||void 0===n?void 0:n.toLowerCase())&&!0!==t.data.isOptional&&e.push(t.data.name),e}),[]);return a&&e.push(a),e}),[]).flat().forEach((function(t){b[t]||(e=!1)})),e},g=function(e){!function(e,t){var n=b;n[e]=t,j(n)}(e.target.name,e.target.value),r(n,b),m()?l(!0):l(!1)},p=function(e){var t,n,a=null===(t=e.versions)||void 0===t?void 0:t.length;if(a<=0)return null;var r=Math.floor(Math.random()*a);return null===(n=e.versions[r].elements)||void 0===n?void 0:n.map((function(e,t){return e.module&&"subsections"!==e.module?Object(d.jsx)("div",{className:"__element p-2",children:I(e)},e.id):null}))},w=function(e){var t=e.map((function(e,t){return e.module&&"subsections"!==e.module?Object(d.jsx)("div",{className:"__element p-2",children:I(e)},e.id):null}));return Object(d.jsx)("div",{className:"absolute right-0 top-0 h-screen",children:Object(d.jsx)("div",{className:"__element p-2 sticky right-0 top-0",children:t})})},I=function(e){var t,n=null;switch(e.data.id=k++,e.module.toLowerCase()){case"aside":n=w(e.elements);break;case"linkthumbnail":t=e.data,n=Object(d.jsx)("a",{href:t.url,target:t.target,children:Object(d.jsx)("div",{className:"border-1 border-solid bg-gray-100 p-5 w-auto hover:bg-gray-200",children:t.title},t.name)});break;case"researchsimulation":n=function(e){return Object(d.jsx)("div",{className:"border-1 border-solid bg-gray-200 p-5",children:Object(d.jsx)(v,{name:e.name,onSearchHistoryChanged:g})},e.name)}(e.data);break;case"dropdown":n=function(e){return Object(d.jsx)("div",{className:"border-1 border-solid bg-gray-200 p-5",children:Object(d.jsx)(h,{name:e.name,label:e.label,options:e.options,onValueSelect:g})},e.name)}(e.data);break;case"selectfromrange":n=function(e){return Object(d.jsx)("div",{className:"bg-gray-200 p-5",children:Object(d.jsx)(O,{name:e.name,label:e.label,options:e.options,onValueSelect:g})},e.name)}(e.data);break;case"slider":n=function(e){var t=e.label,n=e.unit,a=Object(u.a)(e,S);return Object(d.jsx)("div",{className:"bg-gray-200 p-5 w-full",children:Object(d.jsx)(y,Object(i.a)({className:"min-w-full",label:t,unit:n,onSlideChange:g},a))},e.name)}(e.data,e.settings);break;case"headline":n=function(e){return Object(d.jsx)("div",{className:"text-xl pt-3 pb-4",children:Object(d.jsx)("strong",{children:e.text})},e.text)}(e.data);break;case"boxedtext":n=function(e){var t=f(e);return Object(d.jsx)("div",{className:"border border-gray-400 bg-gray-200 p-5 border-solid",children:t})}(e.data);break;case"bulletlist":n=function(e){var t=e.paragraphs.map((function(e,t){return Object(d.jsx)("li",{className:"pb-3 list-item",children:e},t)}));return Object(d.jsx)("ul",{className:"pl-10 list-outside list-disc",children:t})}(e.data);break;case"pickversion":n=p(e.data);break;case"text":n=f(e.data);break;case"textarea":case"textinput":n=function(e){var t=(null===b||void 0===b?void 0:b[e.name])||null;return Object(d.jsx)("div",{className:"border-1 border-solid bg-gray-200 p-5",children:Object(d.jsx)(N,{className:"w-full p-5",readOnly:!1,onBlur:g,label:e.label,name:e.name,rows:e.rows,placeholder:e.placeholder,defaultValue:t})},e.name)}(e.data)}return n},C=function e(t,n){var a=null;return t.map((function(t,r){var l=t.elements.map((function(t,r){return t.module?"subsections"!==t.module?(a=I(t),Object(d.jsx)("div",{className:"__element p-2",children:a},"".concat(t.id))):a=e(t.sections,n+1):null}));return 1===n?Object(d.jsx)("div",{className:"p-6 border my-1 border-solid",children:l},"sect-".concat(n,":").concat(r)):Object(d.jsx)("div",{className:"__subsection",children:l},"subsect-".concat(n,":").concat(r))}))}(t,1);return Object(d.jsx)(d.Fragment,{children:C})},C=function(e){var t=e.title,n=e.text,a=e.buttons,r=e.onAccept,l=e.onReject;return Object(d.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-70 overflow-y-auto h-full w-full",children:Object(d.jsxs)("div",{className:"w-1/2 h-1/2 bg-white m-auto my-10",children:[Object(d.jsx)("div",{className:"flex w-full bg-gray-400 p-3 text-white text-2xl",children:Object(d.jsx)("div",{className:"flex-grow text-center",children:t})}),Object(d.jsx)("div",{className:"p-10 text-lg",children:n.map((function(e,t){return Object(d.jsx)("p",{className:"p-5 py-2",children:e},t)}))}),Object(d.jsxs)("div",{className:"flex w-1/2 pl-10",children:[Object(d.jsx)("button",{className:"flex-grow bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline m-5",onClick:r,children:a.accept}),Object(d.jsx)("button",{className:"flex-grow bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline m-5",onClick:l,children:a.reject})]})]})})},F=function(e,t){var n=e.filter((function(e){return e.thisId===t}));return n.length>1&&console.error("Found more than 1 page with id (".concat(t,")")),n[0]},E=function(e){var t=e.ruleSet,n=e.onSaveData,r=e.sessionId,l=null===t||void 0===t?void 0:t.pages,c=Object(a.useState)(null),i=Object(s.a)(c,2),u=i[0],b=i[1],h=Object(a.useState)(!1),j=Object(s.a)(h,2),f=j[0],m=j[1],g=Object(a.useState)(!1),v=Object(s.a)(g,2),x=v[0],p=v[1],O=Object(a.useState)({sessionId:r}),w=Object(s.a)(O,2),y=w[0],N=w[1],S=Object(a.useState)({show:!1}),k=Object(s.a)(S,2),E=k[0],_=k[1];if(Object(a.useEffect)((function(){var e;!0===(null===u||void 0===u||null===(e=u.settings)||void 0===e?void 0:e.allowProceed)&&m(!0)})),!l||l.length<1)return console.error("No pages defined in survey"),null;if(!u){var D=function(e){var t=e.filter((function(e){return null===e.prevId}));return t.length>1&&console.error("Found more than 1 root page"),t[0]}(l);return D&&D.thisId>=0&&b(D),null}var M,A=function(e){var a;if(u.nextId)if(null!==(a=u.settings)&&void 0!==a&&a.confirmMoveForward){var r,c=null===(r=u.settings)||void 0===r?void 0:r.confirmMoveForward,s=c.title,o=c.text,i=c.buttons;_({show:!0,title:s,text:o,buttons:i,onAccept:function(){_({show:!1}),b(F(l,u.nextId))},onReject:function(){_({show:!1})}})}else b(F(l,u.nextId));else y.surveyId=t.meta.surveyId,n(y),p(!0)},L=function(e){u.prevId&&b(F(l,u.prevId))},H=null;x?H=Object(d.jsx)("div",{className:"flex h-screen",children:Object(d.jsx)("div",{className:"text-black font-bold text-3xl m-auto text-4xl",children:"Umfrage beendet. Sie d\xfcrfen das Fenster jetzt schlie\xdfen."})}):H=(null===(M=u.sections)||void 0===M?void 0:M.length)>0?Object(d.jsx)(I,{defaultValues:y[u],formSections:u.sections,formName:"page:".concat(u.thisId),onFormChanged:function(e,t){var n=y;n[e||"general"]=t,N(n),console.log("Survey Data:",n)},onFormCompleted:function(e){m(e)}},"form_".concat(u.thisId)):Object(d.jsx)("div",{children:"no form data"});var T=function(){var e;return!0!==(null===(e=u.settings)||void 0===e?void 0:e.allowMoveBack)?null:Object(d.jsx)("button",{className:Object(o.a)({"m-5 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline":!0===f}),type:"button",onClick:L,children:"Zur\xfcck"})}(),V=x?null:(null===u.nextId&&(u.labelNextPage="Umfrage beenden"),Object(d.jsx)("button",{disabled:!1===f&&"disabled",className:Object(o.a)({"m-5 bg-blue-300 text-white font-bold py-2 px-4 rounded opacity-50 cursor-not-allowed":!1===f,"m-5 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline":!0===f}),type:"button",onClick:A,children:u.labelNextPage||"Weiter"})),B=E.show,P=E.title,R=E.text,J=E.buttons,Z=E.onAccept,U=E.onReject,z=B?Object(d.jsx)(C,{title:P,text:R,buttons:J,onAccept:Z,onReject:U}):null;return Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{className:"flex justify-end",children:!x&&Object(d.jsxs)("div",{className:"text-white bg-gray-400 px-2 py-0",children:["Seite: ",u.thisId]})}),H,Object(d.jsxs)("div",{className:"flex items-center justify-between",children:[T,V]}),z]},u.thisId)},_=n(53),D=n.n(_),M=n(33),A=n.n(M),L=n(54),H=n(36);Object(L.a)({apiKey:"AIzaSyCFasaqUqOltO4gxPbNmR4gYQqusN2Zthg",authDomain:"escp-survey-2022.firebaseapp.com",databaseURL:"https://escp-survey-2022-default-rtdb.europe-west1.firebasedatabase.app",projectId:"escp-survey-2022",storageBucket:"escp-survey-2022.appspot.com",messagingSenderId:"105376003688",appId:"1:105376003688:web:8a1b08d2a162565648eddd"});var T=Object(H.a)(),V=A()(Math.random().toString()+(new Date).getUTCMilliseconds.toString()).toString(D.a.enc.Hex),B=function(e){Object(H.c)(Object(H.b)(T,"surveys/".concat(e.surveyId,"/").concat(function(){var e=new Date;return e.getYear().toString().padStart(2,"0")+(e.getMonth()+1).toString().padStart(2,"0")+e.getDay().toString().padStart(2,"0")+"_"+e.getHours().toString().padStart(2,"0")+e.getMinutes().toString().padStart(2,"0")+e.getSeconds().toString().padStart(2,"0")+e.getMilliseconds().toString().padStart(2,"0")}(),"_").concat(e.sessionId.toString().substr(0,10))),{data:e}).then((function(){console.log("Saved successfully!")})).catch((function(e){console.error("Not Saved successfully!")}))};var P=function(){var e=Object(a.useState)(null),t=Object(s.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){f.a.get("./content/survey.json").then((function(e){var t=e.data;t?r(t):console.log("Control data invalid.")}))}),[]),n?Object(d.jsx)("div",{className:"container max-w-screen-md ml-auto mr-auto",children:Object(d.jsx)(E,{ruleSet:n,onSaveData:B,sessionId:V})}):Object(d.jsx)("div",{className:"flex h-screen",children:Object(d.jsx)("div",{className:"m-auto text-6xl",children:"Daten werden geladen..."})})},R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,107)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,l=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),l(e),c(e)}))};c.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(P,{})}),document.getElementById("root")),R()},61:function(e,t,n){},80:function(e,t){}},[[106,1,2]]]);
//# sourceMappingURL=main.5ddfd474.chunk.js.map